--- a/include/uapi/linux/if_tunnel.h
+++ b/include/uapi/linux/if_tunnel.h
@@ -3,7 +3,9 @@
 #define _IF_TUNNEL_H_
 
 #include <linux/types.h>
+#ifndef _NET_IF_H
 #include <linux/if.h>
+#endif
 #include <linux/ip.h>
 #include <linux/in6.h>
 #include <asm/byteorder.h>
--- a/include/uapi/linux/ip6_tunnel.h
+++ b/include/uapi/linux/ip6_tunnel.h
@@ -3,7 +3,9 @@
 #define _IP6_TUNNEL_H
 
 #include <linux/types.h>
+#ifndef _NET_IF_H
 #include <linux/if.h>		/* For IFNAMSIZ. */
+#endif
 #include <linux/in6.h>		/* For struct in6_addr. */
 
 #define IPV6_TLV_TNL_ENCAP_LIMIT 4
--- a/include/uapi/linux/if_bridge.h
+++ b/include/uapi/linux/if_bridge.h
@@ -15,7 +15,9 @@
 #define _LINUX_IF_BRIDGE_H
 
 #include <linux/types.h>
+#ifndef _NETINET_IF_ETHER_H
 #include <linux/if_ether.h>
+#endif
 #include <linux/in6.h>
 
 #define SYSFS_BRIDGE_ATTR	"bridge"
--- a/include/bpf_util.h
+++ b/include/bpf_util.h
@@ -18,6 +18,7 @@
 #include <linux/magic.h>
 #include <linux/elf-em.h>
 #include <linux/if_alg.h>
+#include <sys/un.h>
 
 #include "utils.h"
 #include "bpf_scm.h"
--- a/include/uapi/linux/netdevice.h
+++ b/include/uapi/linux/netdevice.h
@@ -26,7 +26,9 @@
 #ifndef _LINUX_NETDEVICE_H
 #define _LINUX_NETDEVICE_H
 
+#ifndef _NET_IF_H
 #include <linux/if.h>
+#endif
 #include <linux/if_ether.h>
 #include <linux/if_packet.h>
 #include <linux/if_link.h>
--- a/include/uapi/linux/netfilter_ipv4/ip_tables.h
+++ b/include/uapi/linux/netfilter_ipv4/ip_tables.h
@@ -17,8 +17,9 @@
 #define _IPTABLES_H
 
 #include <linux/types.h>
-
+#ifndef _NET_IF_H
 #include <linux/if.h>
+#endif
 #include <linux/netfilter_ipv4.h>
 
 #include <linux/netfilter/x_tables.h>
