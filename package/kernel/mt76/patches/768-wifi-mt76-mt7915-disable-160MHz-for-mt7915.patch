From 3d12f69d2e1583ac35c7df3a34efc21673110f61 Mon Sep 17 00:00:00 2001
From: Andreas <962868+Anteus@users.noreply.github.com>
Date: Mon, 3 Apr 2023 11:23:00 +0200
Subject: [PATCH] wifi: mt76: mt7915: disable VHT CAP SUPP CHAN WIDTH 160Mhz
 for mt7915

Fixes buggy 802.11ax on the RT3200 when connecting to some clients.

Partially reverts https://patchwork.kernel.org/project/linux-wireless/patch/20230301163739.52314-1-nbd@nbd.name/

Forum thread https://forum.openwrt.org/t/802-11ax-worse-than-802-11ac-with-mt76-driver/126466
---
 mt7915/init.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/mt7915/init.c b/mt7915/init.c
index b88c38278..fcf01d9ed 100644
--- a/mt7915/init.c
+++ b/mt7915/init.c
@@ -416,7 +416,6 @@ mt7915_init_wiphy(struct mt7915_phy *phy)
 			if (!dev->dbdc_support)
 				vht_cap->cap |=
 					IEEE80211_VHT_CAP_SHORT_GI_160 |
-					IEEE80211_VHT_CAP_SUPP_CHAN_WIDTH_160MHZ |
 					FIELD_PREP(IEEE80211_VHT_CAP_EXT_NSS_BW_MASK, 1);
 		} else {
 			vht_cap->cap |=
